# Simple web Server

- One loop per thread，每个线程一个处理连接的业务逻辑，多线程+非阻塞IO多路复用，这么做也有效地处理了惊群效应的发生
- eventfd 异步唤醒对等线程处理线程独占的任务队列中的回调函数
- 相比这位朋友的 [WebServer](https://github.com/linyacool/WebServer) 优化了网络连接过程处理逻辑，短连接可以稳定且更高效地断开连接
- 使用双缓冲区设计，减少日志写入磁盘的频率
- 多线程负载均衡方式，使用简单的 Round Robin 循环取模以此分发任务
- 边缘触发+非阻塞IO，这是提高并发能力所必须的
- 简单的定时器堆管理，优先关闭剩余时限最小的连接
- Epoll 事件注册与处理逻辑，没有做到简洁明了，因此对于程序的调试和理解，可能不太友好，这点有待优化
- 使用C++语言的一些特性，优化了部分程序编写逻辑
- 增加了简单的读取配置文件的模块

总体而言，在我的虚拟机（配置2核4G）内，4线程服务器程序，QPS内达到了30000+，还是不错的。

> 程序整体基本完工，但是优化后调试着实是有点麻烦的。网络程序本来调试起来不那么直观。善用打印日志，熟悉基本原理，真的是会事半功倍。另外，别太相信别人说的，自己做出来了才是真的。

> 测试使用 [WebBench](https://github.com/EZLippi/WebBench) 项目